## 开发日志

2020-09-17 对需求进行分析，并进行脚手架搭建。+2 小时。

2020-09-18 上午 新增对账单的查询接口，并调整初始数据结构。+4 小时。

2020-09-18 下午 搭建前端基本框架。尝试使用Vite，因其HMR不支持apollo的基于Symbol的exports，详见[ISSUE-598](https://github.com/vitejs/vite/issues/598)，遂改为灵活度稍高的vue-cli。+2小时。



## 需求分析

- 目标用户：对数据安全敏感的离线用户。
- 显示账单，包含时间、类型、类别、金额。
- 支持以月份、类别进行筛选，并显示总支出、总收入。
- 支持根据账单分类进行支出金额统计，并进行排序。
- 分页模式，当使用月份进行筛选时，不做分页。其余情况，每页展示 20 条数据（该数值不作为实际参考，仅当作功能展示）。

## 开发模式

因没有现成的 UI 图，暂定先以功能为主，功能完成后进行样式开发。

## 系统架构

采用 client-server 模式，方便进行局域网共享，或家庭成员共同记账。

## 数据结构调整

- bill 将category重命名为categoryId
- 在 bill 中增加自增 id 字段，以便在新增或删除等场景下操作该表

## 技术选型

**服务端技术选型**

- 数据库：简单起见，暂定将 csv 文件本身作为数据库使用，并采用[node-csvdb](https://github.com/ysnglt/node-csvdb)。采用原因：1. 其基于[fast-csv](https://github.com/C2FO/fast-csv)，性能较好，但其封装并没有以性能为主。2. 支持TypeScript。3. 其接口设计简洁，以便日后迁移至其它数据库。
- 框架：NestJS。采用原因：支持 TypeScript 和 GraphQL。

**客户端技术选型**

- 因本人想体验一下 Vue3，这里暂且选择 Vue3。
